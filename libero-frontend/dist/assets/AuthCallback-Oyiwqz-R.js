import{d as i,u,r as d,o as h,a as m,c as r,b as s,e as f,t as b,f as c,_ as p}from"./index-BCzPVFf8.js";const k={class:"min-h-screen flex items-center justify-center"},g={class:"text-center p-8"},A={key:0,class:"text-red-500"},_=i({__name:"AuthCallback",setup(C){const a=m(),t=u(),o=d(null);return h(async()=>{const l=window.location.hash;let e=null;if(l.startsWith("#token=")&&(e=l.substring(7)),history.replaceState(null,"",window.location.pathname+window.location.search),e){console.log("OAuth Callback: Token found in hash.");try{await t.handleAuthCallback(e),t.isAuthenticated&&t.user?(console.log("OAuth Callback: handleAuthCallback successful. Redirecting to Profile."),a.push({name:"profile"})):(console.error("OAuth Callback: handleAuthCallback completed, but user is not authenticated. Profile fetch likely failed."),o.value=t.error||"Login succeeded, but failed to load user details. Please try again.",setTimeout(()=>a.push({name:"Home"}),4e3))}catch(n){console.error("OAuth Callback: Unexpected error during handleAuthCallback:",n),o.value=n.message||"An unexpected error occurred during login processing. Please try again.",t.logout(),setTimeout(()=>a.push({name:"Home"}),4e3)}}else console.error("OAuth Callback: No token found in URL hash."),o.value="Authentication callback failed. No token received. Redirecting to login.",setTimeout(()=>a.push({name:"Home"}),3e3)}),(l,e)=>(c(),r("div",k,[s("div",g,[e[0]||(e[0]=s("div",{class:"mb-4"},[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})],-1)),e[1]||(e[1]=s("h2",{class:"text-2xl font-semibold mb-4"},"Processing login...",-1)),o.value?(c(),r("p",A,b(o.value),1)):f("",!0)])]))}}),x=p(_,[["__scopeId","data-v-e2cb2f02"]]);export{x as default};
